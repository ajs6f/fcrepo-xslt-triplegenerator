<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.3 at Oct 16, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>fcrepo-xslt-triplegenerator - </title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20121016" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                fcrepo-xslt-triplegenerator
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
            
                <div class="xleft">
        <span id="publishDate">Last Published: 2012-10-16</span>
                  &nbsp;| <span id="projectVersion">Version: 1.0-SNAPSHOT</span>
                      </div>
            <div class="xright">                    <a href="http://fedora-commons.org" class="externalLink" title="Fedora">Fedora</a>
            |
                        <a href="http://www.library.virginia.edu" class="externalLink" title="UVa">UVa</a>
              
            
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
            
                                <h5>Main</h5>
                  <ul>
                  <li class="none">
                          <a href="motivation.html" title="Motivation">Motivation</a>
            </li>
                  <li class="none">
                          <a href="warnings.html" title="Warnings">Warnings</a>
            </li>
                  <li class="none">
                          <a href="usage.html" title="Usage">Usage</a>
            </li>
                  <li class="none">
            <strong>Configuration</strong>
          </li>
                  <li class="none">
                          <a href="xslt.html" title="XSLT Usage">XSLT Usage</a>
            </li>
                  <li class="none">
                          <a href="examples.html" title="Examples">Examples</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                  <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                      <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
            
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        
    
        <div class="section"><h2>Making this component available to Fedora<a name="Making_this_component_available_to_Fedora"></a></h2>
            <p>Install the <a class="externalLink" href="https://github.com/downloads/ajs6f/fcrepo-xslt-triplegenerator/fcrepo-xslt-triplegenerator-1.0-SNAPSHOT-with-dependencies.jar">built library</a> into the <tt>WEB-INF/lib</tt> directory of
            your Fedora web-app. Be aware that this is a large package of code, because it includes all
            of the necessary gear for parsing RDF.</p>
        </div>
        <div class="section"><h2>Configuring this component into Fedora<a name="Configuring_this_component_into_Fedora"></a></h2>
            <p> To use this component with Fedora, you will need to adjust the (Spring)
                configuration of the triple generator network. Normally, that is available in a
                file: <tt>$FEDORA_HOME/server/config/spring/triple-generator.xml</tt>
                Within this file you will see elements like:</p>
            <div class="source"><pre>
    
    &lt;bean id=&quot;ServiceDefinition-3.0&quot;
      class=&quot;org.fcrepo.server.resourceIndex.ServiceDefinitionTripleGenerator_3_0&quot;
      scope=&quot;prototype&quot;&gt;
    &lt;/bean&gt;
    
            </pre></div>
            <p>each of which defines a triple generator, and an element like:</p>
            <div class="source"><pre>
    
    &lt;bean id=&quot;org.fcrepo.server.resourceIndex.TripleGenerator&quot;
      class=&quot;org.fcrepo.server.resourceIndex.ModelBasedTripleGenerator&quot;
      scope=&quot;prototype&quot;&gt;
      &lt;property name=&quot;tripleGenerators&quot;&gt;
          &lt;map&gt;
              &lt;entry key=&quot;info:fedora/fedora-system:FedoraObject-3.0&quot; value-ref=&quot;Object-3.0&quot; /&gt;
              &lt;entry key=&quot;info:fedora/fedora-system:ContentModel-3.0&quot; value-ref=&quot;ContentModel-3.0&quot; /&gt;
              &lt;entry key=&quot;info:fedora/fedora-system:ServiceDefinition-3.0&quot; value-ref=&quot;ServiceDefinition-3.0&quot; /&gt;
              &lt;entry key=&quot;info:fedora/fedora-system:ServiceDeployment-3.0&quot; value-ref=&quot;ServiceDeployment-3.0&quot; /&gt;
          &lt;/map&gt;
      &lt;/property&gt;
    &lt;/bean&gt;
    
            </pre></div>
            <p>Each of the entry elements in this last stanza represent a mapping from a content model
                (key) to a triple generator (value-ref). You must create a new generator and map it to a content model
            with which it is to be used. You can start by adding a pair of elements like these:</p>
            <div class="source"><pre>

  &lt;bean id=&quot;xslt-file&quot; class=&quot;org.springframework.core.io.FileSystemResource&quot;&gt;
    &lt;constructor-arg type=&quot;String&quot;
      value=&quot;/Documents/fcrepo-xslt-triple/mods2rdf.xsl&quot;/&gt;
  &lt;/bean&gt;
  &lt;bean id=&quot;mods-extractor&quot; class=&quot;edu.virginia.lib.fedora.XsltDsTripleGenerator&quot;&gt;
    &lt;property name=&quot;datastreamId&quot; value=&quot;descMetadata&quot;/&gt;
    &lt;property name=&quot;xsltInputStreamSource&quot; ref=&quot;xslt-file&quot;/&gt;
  &lt;/bean&gt;
  
            </pre></div>
            <p>The first bean locates an XSLT document that will be used to transform XML to RDF/XML. Obviously, you'll
                want to have that file available by the time you expect extraction to be ocurring. The second
            (using that first bean as a parameter) defines the actual triple generator that we are adding. The other 
            parameter (datastreamId) declares which datastream in the object at hand is to be transformed.</p>
            <p>Now we can add a mapping from a content model to our new triple generator:</p>
            <div class="source"><pre>

&lt;entry key=&quot;info:fedora/djatoka:jp2CModel&quot; value-ref=&quot;mods-extractor&quot; /&gt;

            </pre></div>
        </div>
        <div class="section"><h2>Configuring the XSLT for use with this component<a name="Configuring_the_XSLT_for_use_with_this_component"></a></h2>
            <p>The XSLT document for use with this configuration must do one job: it must operate on an XML document and 
            produce an RDF/XML document. (It's worth pointing out that if the original document is already RDF/XML, then the transform
            can just be an identity.) Two parameters are available for use with this transform: <tt>pid</tt> and <tt>datastreamId</tt>.
            The usage of RDF-subjects in the output of this transform is subject to certain conditions.
            See <a href="xslt.html">here</a> for more info.</p>
        </div> 
    

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2012.
          All Rights Reserved.      
            
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
